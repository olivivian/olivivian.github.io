---
title: webå¼€å‘å®‰å…¨ä¹‹ç½‘ç«™éƒ½æ˜¯æ€ä¹ˆè¢«æ”»å‡»çš„ï¼Ÿ
date: 
tags: webå®‰å…¨
categories: å‰ç«¯
photos:
  - https://gitee.com/Olivivian/PicGoImages/raw/master/img//00%E8%B5%84%E6%96%99/00juejincundang/2021/09/05/%7B0AK-BBO2I-GBT%7BZJLNXVXB.png
---

åœ¨äº’è”ç½‘æ—¶ä»£ï¼Œæ•°æ®å®‰å…¨å’Œä¸ªäººéšç§ä¸€ç›´éƒ½æ˜¯å¤§å®¶å¾ˆå…³å¿ƒçš„é—®é¢˜ï¼Œæ€ä¹ˆæ‰èƒ½æ›´å¥½çš„ä¿æŠ¤æˆ‘ä»¬çš„æ•°æ®å‘¢ï¼Ÿä¿—è¯è¯´è¦çŸ¥å·±çŸ¥å½¼æ‰èƒ½ç™¾æˆ˜ä¸æ®†ï¼Œæ‰€ä»¥å…ˆæ¥äº†è§£ä¸€ä¸‹Webå®‰å…¨ä¸­çš„å„ç§æ”»å‡»çš„ç±»å‹åŠåŸç†å§ï¼ğŸ¤—



# å‰è¨€

çœ‹å®Œæœ¬ç¯‡ä½ å°†æ”¶è·ï¼ˆå†…å®¹æœ‰ç‚¹å¤šï¼Œå»ºè®®**æ”¶è—â­**åœ¨çœ‹ï¼‰

- å‰ç«¯å®‰å…¨å¤§éƒ¨åˆ†çš„æ”»å‡»ç±»å‹åŠåŸå‹è§£æ

å…·ä½“å¦‚å›¾ğŸ‘‡



![image-20210905154811350](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905154811350.png)

# Cross-Site Scripting(XSS)

è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ï¼Œæ”»å‡»è€…æŠŠä»–ä»¬çš„è„šæœ¬æ¶æ„çš„æ’åˆ°æˆ‘ä»¬çš„é¡µé¢æ‰§è¡Œ



![image-20210903203022807](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/03/image-20210903203022807.png)

**XSSçš„ä¸€äº›ç‰¹ç‚¹**

- é€šå¸¸éš¾ä»¥ä»UIä¸Šæ„ŸçŸ¥(æš—åœ°æ‰§è¡Œè„šæœ¬)
- çªƒå–ç”¨æˆ·ä¿¡æ¯(cookie/token)ï¼Œåœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œå‘é€æ¶æ„è¯·æ±‚ã€‚
- ç»˜åˆ¶UI (ä¾‹å¦‚å¼¹çª—)ï¼Œè¯±éª—ç”¨æˆ·ç‚¹å‡»/å¡«å†™è¡¨å•



**XSSåŸç†**

æ”»å‡»è€…å¾€Webé¡µé¢æ’å…¥æ¶æ„å¯æ‰§è¡Œç½‘é¡µè„šæœ¬ä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µé¢æ—¶ï¼Œæ¶æ„è„šæœ¬è¢«æ‰§è¡Œï¼Œä»è€Œç›—å–ç”¨æˆ·ä¿¡æ¯æˆ–ä¾µçŠ¯ç”¨æˆ·å…¶ä»–å®‰å…¨éšç§



## Stored XSS

**å­˜å‚¨å‹æ”»å‡»**

- æ¶æ„è„šæœ¬è¢«å­˜åœ¨æ•°æ®åº“ä¸­
- è®¿é—®é¡µé¢â†’è¯»æ•°æ®==è¢«æ”»å‡»
- å±å®³æœ€å¤§ï¼Œå¯¹å…¨éƒ¨ç”¨æˆ·å¯è§

ä¸€èˆ¬å­˜åœ¨äº Form è¡¨å•æäº¤ç­‰äº¤äº’åŠŸèƒ½ï¼Œå¦‚æ–‡ç« ç•™è¨€ï¼Œæäº¤æ–‡æœ¬ä¿¡æ¯ç­‰ï¼Œæ”»å‡»è€…åˆ©ç”¨XSSæ¼æ´ï¼Œå°†å†…å®¹ç»æ­£å¸¸åŠŸèƒ½æäº¤è¿›å…¥æ•°æ®åº“æŒä¹…ä¿å­˜ï¼Œå½“å‰ç«¯é¡µé¢è·å¾—åç«¯ä»æ•°æ®åº“ä¸­è¯»å‡ºçš„æ³¨å…¥ä»£ç æ—¶ï¼Œæ°å¥½å°†å…¶æ¸²æŸ“æ‰§è¡Œã€‚

![image-20210904153932547](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904153932547.png)



å°±ä»¥æ˜é‡‘çš„è¯„è®ºåŠŸèƒ½ä¸¾ä¾‹ï¼Œå‡å¦‚å®ƒå­˜åœ¨å­˜å‚¨çš„ XSS æ¼æ´ï¼Œæˆ‘åœ¨æŸç¯‡æ–‡ç« ä¸‹é¢è¾“å…¥ä»¥ä¸‹è¯„è®ºï¼Œç½‘ç«™å°†ä¼šæ˜¾ç¤ºæˆ‘è¾“å…¥çš„å†…å®¹ã€‚å¦‚æœè¯„è®ºæ–‡æœ¬åŒ…å« HTML æ ‡ç­¾ï¼Œå®ƒä»¬å°†è¢«æ·»åŠ åˆ°ç½‘é¡µçš„æºä»£ç ä¸­ï¼›ç‰¹åˆ«æ˜¯ï¼Œä»»ä½•è„šæœ¬æ ‡ç­¾éƒ½ä¼šåœ¨é¡µé¢åŠ è½½æ—¶è¿è¡Œã€‚



![image-20210904143510982](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904143510982.png)



è¿™æ ·ï¼Œå½“å…¶ä»–äººåŠ è½½å¸¦æœ‰æˆ‘è¿™ä¸ªè¯„è®ºçš„é¡µé¢æ—¶ï¼Œæˆ‘çš„è„šæœ¬æ ‡ç­¾éƒ½ä¼šè¿è¡Œå¹¶çªƒå–å…¶ä»–ç”¨æˆ·çš„æˆæƒ cookieï¼Œå°†å…¶å‘é€åˆ°æˆ‘æŒ‡å®šçš„æœåŠ¡å™¨è¿›è¡Œæ”¶é›†ã€‚ï¼ˆå¾ˆæ˜æ˜¾æ˜é‡‘æ˜¯æœ‰åšé˜²å¾¡çš„ï¼Œæ‰€ä»¥ä»€ä¹ˆéƒ½æ²¡æœ‰å‘ç”Ÿã€‚ğŸ§ï¼‰



è¿™åªæ˜¯ç®€å•çš„ä¸¾ä¸ªä¾‹å­ï¼ŒXSSæ”»å‡»ä¹Ÿä¸æ˜¯è¿™ä¹ˆå®¹æ˜“æˆåŠŸçš„ï¼Œå®ƒéœ€è¦æ»¡è¶³

- POST è¯·æ±‚æäº¤è¡¨å•åç«¯æ²¡åšè½¬ä¹‰ç›´æ¥å…¥åº“ã€‚

- åç«¯ä»æ•°æ®åº“ä¸­å–å‡ºæ•°æ®æ²¡åšè½¬ä¹‰ç›´æ¥è¾“å‡ºç»™å‰ç«¯ã€‚

- å‰ç«¯æ‹¿åˆ°åç«¯æ•°æ®æ²¡åšè½¬ä¹‰ç›´æ¥æ¸²æŸ“æˆ DOMã€‚

  



## Reflected XSS

åå°„å‹æ”»å‡»ï¼ˆåˆåéæŒä¹…å‹ï¼‰

- ä¸æ¶‰åŠæ•°æ®åº“
- ä»URLä¸Šæ”»å‡»

![image-20210904154116682](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904154116682.png)



æ¥çœ‹ä¸€ä¸ªå®ä¾‹ï¼Œ

ç°åœ¨é¡µé¢ä¸Šæœ‰ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œç”¨æ¥æäº¤å§“åï¼Œæäº¤åˆ°æœåŠ¡å™¨ç«¯æ—¶ï¼ŒæœåŠ¡å™¨ç«‹å³è§£æå¹¶ä¸”ç›´æ¥æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚

![image-20210904120554945](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904120554945.png)



å‡å¦‚æ²¡æœ‰åšä»»ä½•é˜²æŠ¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥é€šè¿‡è¿™ä¸ªè¾“å…¥æ¡†æ³¨å…¥è„šæœ¬ï¼Œå®Œæˆä¸€æ¬¡XSSæ”»å‡»

![image-20210904121908119](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904121908119.png)

å½“å‰æˆ‘ç›´æ¥è¾“å…¥äº†scriptè„šæœ¬ï¼Œæäº¤çš„æ—¶å€™ï¼Œè„šæœ¬è¢«æ‰§è¡Œäº†ï¼Œå•å•è¿™æ ·çœ‹å¥½åƒæ²¡çœ‹å‡ºæœ‰ä»€ä¹ˆå±å®³ğŸ¤”

é‚£æˆ‘ä»¬æ¢ä¸ªå†™æ³•ï¼Œç°åœ¨å·²çŸ¥è¿™ä¸ªåœ°å€æ¥å—nameå‚æ•°ï¼Œå¹¶ä¸”æ— ä»»ä½•é˜²æŠ¤ï¼Œå¦‚æœæˆ‘ä»¬ç°åœ¨ç»™nameæ³¨å…¥è¿™ä¹ˆä¸€æ®µä»£ç 

![image-20210905231910960](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905231910960.png)

ç„¶åç”¨æˆ·ç‚¹å‡»äº†æˆ‘ä»¬æ”¹é€ çš„è¿™ä¸ªé“¾æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

å®ƒå°±ä¼šè·å–ç”¨æˆ·çš„æ‰€æœ‰ cookieï¼Œå¹¶ä¸”å‘é€åˆ° www.cgisecurity.com/cgi-bin/cookie.cgiè¿™ä¸ªåœ°å€ï¼Œè¿™æ ·è¯¥ç”¨æˆ·çš„æ‰€æœ‰ä¿¡æ¯å°±è¢«åˆ«äººçªƒå–åˆ°äº†ã€‚

> å¦‚æœç›´æ¥åœ¨æµè§ˆå™¨æµ‹è¯•ï¼Œscriptå¯èƒ½ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºç°åœ¨å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½ä¼šé’ˆå¯¹`script`ç­‰ä¸€äº›å±é™©æ ‡ç­¾çš„æ’å…¥ä¼šåšæ‹¦æˆªè¿‡æ»¤ï¼Œä½ å¯ä»¥è¿™æ ·æ”¹å†™
>
> ![image-20210905231942747](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905231942747.png)
> 
> å› ä¸ºæ˜¯æ’å…¥ä¸€å¼ å›¾ç‰‡ï¼Œæµè§ˆå™¨ä¸€èˆ¬ä¸ä¼šè¿‡æ»¤æ‹¦æˆªï¼Œç„¶åæŠŠ`src`ç½®ç©ºä½¿å…¶è§¦å‘`onerror`äº‹ä»¶ï¼Œæ¶æ„è„šæœ¬å°±ä¼šé—´æ¥åœ°è¢«æ‰§è¡Œï¼›





>åå°„æ”»å‡»æ˜¯æŒ‡æ³¨å…¥çš„è„šæœ¬ä» Web æœåŠ¡å™¨åå°„å‡ºæ¥çš„æ”»å‡»ï¼Œä¾‹å¦‚é”™è¯¯æ¶ˆæ¯ã€æœç´¢ç»“æœæˆ–ä»»ä½•å…¶ä»–å“åº”ï¼Œå…¶ä¸­åŒ…æ‹¬ä½œä¸ºè¯·æ±‚çš„ä¸€éƒ¨åˆ†å‘é€åˆ°æœåŠ¡å™¨çš„éƒ¨åˆ†æˆ–å…¨éƒ¨è¾“å…¥ã€‚åå°„æ”»å‡»é€šè¿‡å¦ä¸€æ¡è·¯å¾„ä¼ é€’ç»™å—å®³è€…ï¼Œä¾‹å¦‚åœ¨ç”µå­é‚®ä»¶ä¸­æˆ–åœ¨å…¶ä»–ç½‘ç«™ä¸Šã€‚å½“ç”¨æˆ·è¢«è¯±éª—ç‚¹å‡»æ¶æ„é“¾æ¥ã€æäº¤ç‰¹åˆ¶è¡¨å•ï¼Œç”šè‡³åªæ˜¯æµè§ˆæ¶æ„ç«™ç‚¹æ—¶ï¼Œæ³¨å…¥çš„ä»£ç ä¼šä¼ æ’­åˆ°æ˜“å—æ”»å‡»çš„ç½‘ç«™ï¼Œä»è€Œå°†æ”»å‡»åæ˜ å›ç”¨æˆ·çš„æµè§ˆå™¨ã€‚ç„¶åæµè§ˆå™¨æ‰§è¡Œä»£ç ï¼Œå› ä¸ºå®ƒæ¥è‡ªâ€œå—ä¿¡ä»»çš„â€æœåŠ¡å™¨ã€‚
>
>åå°„å‹XSSæ”»å‡»çš„ç‰¹ç‚¹åœ¨äºå³æ—¶æ€§ï¼Œå®ƒä¸éœ€è¦å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­ï¼Œé€šè¿‡å·§å¦™åœ°æ„é€ ä¸€ä¸ªå¸¦æ¶æ„ä»£ç çš„URLï¼Œç„¶åå¼•å¯¼ç”¨æˆ·ç‚¹å‡»è®¿é—®ï¼Œå³å¯å®ç°æ”»å‡»



## DOM-based XSS

åŸºäºDOM

- ä¸éœ€è¦æœåŠ¡å™¨çš„å‚ä¸
- æ¶æ„æ”»å‡»çš„å‘èµ·+æ‰§è¡Œï¼Œå…¨åœ¨æµè§ˆå™¨å®Œæˆ



è¿˜æ˜¯å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾ä»¥ä¸‹ä»£ç ç”¨äºåˆ›å»ºä¸€ä¸ªè¡¨å•ï¼Œè®©ç”¨æˆ·é€‰æ‹©ä»–ä»¬å–œæ¬¢çš„è¯­è¨€ã€‚æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­è¿˜æä¾›äº†é»˜è®¤è¯­è¨€ï¼Œä½œä¸ºå‚æ•°â€œdefaultâ€ã€‚

![image-20210905232008016](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232008016.png)

![image-20210905210650632](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905210650632.png)

è¯¥é¡µé¢æ˜¯ä½¿ç”¨ URL è°ƒç”¨çš„ï¼Œä¾‹å¦‚ï¼š

![image-20210905232025458](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232025458.png)

é’ˆå¯¹è¯¥é¡µé¢çš„åŸºäº DOM çš„ XSS æ”»å‡»å¯ä»¥é€šè¿‡å‘å—å®³è€…å‘é€ä»¥ä¸‹ URL æ¥å®Œæˆï¼š

![image-20210905232039405](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232039405.png)

å½“å—å®³è€…ç‚¹å‡»è¿™ä¸ªé“¾æ¥æ—¶ï¼Œæµè§ˆå™¨ä¼šå‘é€ä¸€ä¸ªè¯·æ±‚ï¼š

![image-20210905232052579](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232052579.png)

åˆ° www.some.siteã€‚æœåŠ¡å™¨ä»¥åŒ…å«ä¸Šè¿° Javascript ä»£ç çš„é¡µé¢è¿›è¡Œå“åº”ã€‚æµè§ˆå™¨ä¸ºé¡µé¢åˆ›å»ºä¸€ä¸ª DOM å¯¹è±¡ï¼Œå…¶ä¸­ document.location å¯¹è±¡åŒ…å«å­—ç¬¦ä¸²ï¼š

![image-20210905232105798](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232105798.png)

é¡µé¢ä¸­çš„åŸå§‹ Javascript ä»£ç ä¸å¸Œæœ›é»˜è®¤å‚æ•°åŒ…å« HTML æ ‡è®°ï¼Œå› æ­¤å®ƒåªæ˜¯åœ¨è¿è¡Œæ—¶å¯¹å…¶è¿›è¡Œè§£ç å¹¶å°†å…¶å›æ˜¾åˆ°é¡µé¢ (DOM) ä¸­ã€‚ç„¶åæµè§ˆå™¨å‘ˆç°ç»“æœé¡µé¢å¹¶æ‰§è¡Œæ”»å‡»è€…çš„è„šæœ¬ï¼š

![image-20210905232118412](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232118412.png)

çœ‹åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯è§‰å¾—ï¼Œè¿™ä¸æ˜¯å’Œä¸Šé¢çš„åå°„æ€§ä¸€æ ·å—ï¼ŸğŸ¤¨

é¦–å…ˆä»ä¸¤ä¸ªç¤ºä¾‹çš„é“¾æ¥æ¥çœ‹,ç»“æ„å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬è¿™æ ·æ”¹é€ ä¸€ä¸‹ï¼ŒæŠŠ`ï¼Ÿå·`æ”¹æˆ`#å·`

![image-20210905232159500](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232159500.png)

åœ¨å°è¯•æ‰§è¡Œï¼Œä¼šå‘ç°ï¼ŒReflected XSSï¼ˆåå°„å‹ï¼‰ä¸åœ¨ç”Ÿæ•ˆï¼Œè€ŒDOM-based XSSï¼ˆåŸºäºDOMï¼‰çš„æ”»å‡»ä¾ç„¶ç”Ÿæ•ˆã€‚



>æµè§ˆå™¨ä¸ä¼šå°† URI ç‰‡æ®µï¼ˆURI ä¸­â€œ#â€ä¹‹åçš„éƒ¨åˆ†ï¼‰å‘é€åˆ°æœåŠ¡å™¨



## Reflected XSS å’ŒDOM-based XSSçš„åŒºåˆ«

Reflected XSSï¼ˆåå°„å‹ï¼‰å’ŒDOM-based XSSï¼ˆåŸºäºDOMï¼‰çš„åŒºåˆ«å°±æ˜¯å®Œæˆæ³¨å…¥è„šæœ¬çš„åœ°æ–¹ä¸åŒï¼Œåœ¨åŸºäº DOM çš„ XSS æ”»å‡»ä¸­ï¼Œæ¶æ„æ•°æ®ä¸ä¼šè§¦åŠ Web æœåŠ¡å™¨ã€‚ç›¸åï¼Œå®ƒç”± JavaScript ä»£ç å®Œå…¨åæ˜ åœ¨å®¢æˆ·ç«¯ã€‚

![image-20210903203703407](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/03/image-20210903203703407.png)

## Mutation-based XSS

çªå˜å‹XSSï¼Œä¹Ÿå«åšmXSS

> mutationï¼Œçªå˜ï¼Œæ¥è‡ªé—ä¼ å­¦çš„ä¸€ä¸ªå•è¯ï¼Œgene mutationï¼ˆå³åŸºå› çªå˜ï¼‰

- åˆ©ç”¨äº†æµè§ˆå™¨æ¸²æŸ“DOMçš„ç‰¹æ€§(ç‹¬ç‰¹ä¼˜åŒ–)

- ä¸åŒæµè§ˆå™¨ï¼Œä¼šæœ‰åŒºåˆ«(æŒ‰æµè§ˆå™¨è¿›è¡Œæ”»å‡»)



ä¸è®ºæ˜¯æœåŠ¡å™¨ç«¯æˆ–å®¢æˆ·ç«¯çš„XSSè¿‡æ»¤å™¨ï¼Œéƒ½è®¤å®šè¿‡æ»¤åçš„HTMLæºä»£ç åº”è¯¥ä¸æµè§ˆå™¨æ‰€æ¸²æŸ“åçš„HTMLä»£ç ä¿æŒä¸€è‡´ï¼Œè‡³å°‘ä¸ä¼šå‡ºç°å¾ˆå¤§çš„å‡ºå…¥ã€‚

![image-20210904223150612](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904223150612.png)





ç„¶è€Œï¼Œå¦‚æœç”¨æˆ·æ‰€æä¾›çš„å¯Œæ–‡æœ¬å†…å®¹é€šè¿‡javascriptä»£ç è¿›å…¥innerHTMLå±æ€§åï¼Œä¸€äº›æ„å¤–çš„å˜åŒ–ä¼šä½¿å¾—è¿™ä¸ªè®¤å®šä¸å†æˆç«‹ï¼šä¸€ä¸²çœ‹ä¼¼æ²¡æœ‰ä»»ä½•å±å®³çš„HTMLä»£ç ï¼Œå°†é€ƒè¿‡XSSè¿‡æ»¤å™¨çš„æ£€æµ‹ï¼Œæœ€ç»ˆè¿›å…¥æŸä¸ªDOMèŠ‚ç‚¹çš„innerHTMLä¸­ï¼Œæµè§ˆå™¨çš„æ¸²æŸ“å¼•æ“ä¼šå°†æœ¬æ¥æ²¡æœ‰ä»»ä½•å±å®³çš„HTMLä»£ç æ¸²æŸ“æˆå…·æœ‰æ½œåœ¨å±é™©çš„XSSæ”»å‡»ä»£ç ã€‚éšåï¼Œè¯¥æ®µæ”»å‡»ä»£ç ï¼Œå¯èƒ½ä¼šè¢«JSä»£ç ä¸­çš„å…¶å®ƒä¸€äº›æµç¨‹è¾“å‡ºåˆ°DOMä¸­æˆ–æ˜¯å…¶å®ƒæ–¹å¼è¢«å†æ¬¡æ¸²æŸ“ï¼Œä»è€Œå¯¼è‡´XSSçš„æ‰§è¡Œã€‚



> è¿™ç§ç”±äºHTMLå†…å®¹è¿›å…¥innerHTMLåå‘ç”Ÿæ„å¤–å˜åŒ–ï¼Œè€Œæœ€ç»ˆå¯¼è‡´XSSçš„æ”»å‡»æµç¨‹ï¼Œè¢«ç§°ä¸ºçªå˜XSS

![image-20210904160201378](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904160201378.png)



mXSSçš„å‡ ç§ç±»å‹ï¼Œä¸‹é¢æˆ‘ä»¬æŒ‘å‡ ä¸ªæ¥è¯´ï¼Œæƒ³è¦äº†è§£æ›´å¤šå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ğŸ‘‰ [fp170.pdf]( https://cure53.de/fp170.pdf)  

![image-20210904230038546](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904230038546.png)

### 3.1 Backtick Characters breaking Attribute Delimiter Syntax

åå¼•å·æ‰“ç ´å±æ€§è¾¹ç•Œå¯¼è‡´çš„ mXSS

![image-20210904231020779](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904231020779.png)

å¯ä»¥çœ‹åˆ°ï¼Œçªå˜åçš„å½¢å¼å˜æˆäº†æœ‰æ•ˆçš„XSSæ”»å‡»



### 3.3 Backslashes in CSS Escapes causing StringBoundary Violation

CSSä¸­åæ–œçº¿è½¬ä¹‰å¯¼è‡´çš„mXSS



![image-20210904231549813](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904231549813.png)



>åœ¨CSSä¸­ï¼Œå…è®¸ç”¨\æ¥å¯¹å­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œä¾‹å¦‚ï¼š`property: 'v\61 lue'` è¡¨ç¤º `property:'value'`ï¼Œå…¶ä¸­61æ˜¯å­—æ¯açš„asciiç ï¼ˆ16è¿›åˆ¶ï¼‰ã€‚\åä¹Ÿå¯ä»¥æ¥unicodeï¼Œä¾‹å¦‚ï¼š\20AC è¡¨ç¤º â‚¬ ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™ç§è½¬ä¹‰ä¸ä¼šæœ‰é—®é¢˜ã€‚
>
>ç„¶è€Œï¼Œä¸€äº›ç°ä»£æµè§ˆå™¨æ‰“ç ´äº† CSS è½¬ä¹‰çš„æ­£ç¡®å’Œæ ‡å‡†é©±åŠ¨ä½¿ç”¨æ‰€è¡¨æ˜çš„å®‰å…¨æ‰¿è¯ºã€‚ç‰¹åˆ«æ˜¯ï¼Œå®ƒå‘ç”Ÿåœ¨è®¿é—®çˆ¶å…ƒç´ çš„innerHTML å±æ€§æ—¶ã€‚æˆ‘ä»¬è§‚å¯Ÿåˆ°ä¸€ç§å°†è½¬ä¹‰è½¬æ¢ä¸ºå…¶è§„èŒƒè¡¨ç¤ºçš„è¡Œä¸ºã€‚åºåˆ—å±æ€§ï¼š'val\27ue' å°†å¯¼è‡´innerHTML è¡¨ç¤ºå±æ€§ï¼š'val'ue'ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ³¨å…¥éšè—åœ¨æ­£ç¡®å¼•ç”¨å’Œè½¬ä¹‰çš„ CSS å­—ç¬¦ä¸²ä¸­çš„ä»»æ„ CSS ä»£ç æ¥æ»¥ç”¨æ­¤è¡Œä¸ºã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ç»•è¿‡æ£€æŸ¥ç¬¦åˆæ ‡å‡†çš„æœ‰æ•ˆä»£ç çš„ HTML è¿‡æ»¤å™¨

### 3.4 Misfit Characters in Entity Representation breaking CSS Strings

CSSä¸­åŒå¼•å·å®ä½“æˆ–è½¬ä¹‰å¯¼è‡´çš„mXSS

![image-20210904234016829](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904234016829.png)

>ä¸€äº›æµè§ˆå™¨ä¸­ï¼Œä½¿ç”¨ CSS å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ï¼Œæ¸²æŸ“å¼•æ“å°†å®ƒä»¬è½¬æ¢ä¸ºå•å¼•å·ï¼Œä¸ç®¡è¿™ä¸¤ä¸ªå­—ç¬¦çœ‹èµ·æ¥ä¸ç›¸å…³ã€‚ è¿™æ„å‘³ç€ \22,
>&quot;, &#x22; å’Œ &#34; å­—ç¬¦åºåˆ—å°†åœ¨ innerHTML è®¿é—®æ—¶è½¬æ¢ä¸º â€™ å­—ç¬¦ã€‚
>
>åªèƒ½æ¨æµ‹è¿™ç§ä»¤äººæƒŠè®¶çš„è¡Œä¸ºçš„åŸå› ã€‚ä¸€ç§å¯èƒ½çš„è§£é‡Šæ˜¯ï¼š\22 å…ˆè¢«è§£ç ä¸º "ï¼Œä½†è€ƒè™‘åˆ°åŒå¼•å·ä¼šé—­åˆæ‰styleå±æ€§ï¼Œæ‰€ä»¥æµè§ˆå™¨æ¸²æŸ“å¼•æ“å°†"è¿›ä¸€æ­¥è½¬å˜ä¸ºäº†'ï¼Œä»¥é¿å…è¿™ç§æƒ…å†µçš„å‘ç”Ÿã€‚å½“ç„¶ï¼Œè¿™ä¹Ÿæ„å‘³è¿™ï¼Œé™¤äº† \22ï¼Œ\0022 ä¹‹å¤–ï¼ŒHTMLå®ä½“å¦‚ï¼š
>
>```
>&quot; &#x22; &#34; 
>```
>
>ç­‰åŒå¼•å·çš„è¡¨ç¤ºå½¢å¼å‡å¯å¯¼è‡´è¿™ç±»é—®é¢˜ã€‚



### 3.5 CSS Escapes in Property Names violating entire HTML Structure

CSSå±æ€§åä¸­çš„è½¬ä¹‰æ‰€å¯¼è‡´çš„mXSS

![image-20210904235230335](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/04/image-20210904235230335.png)

>ä¹‹å‰è¯´çš„éƒ½æ˜¯åœ¨ CSS å±æ€§å€¼ä¸­çš„ä¸€äº›æƒ…å†µï¼Œå¦‚æœæ˜¯åœ¨CSS å±æ€§åç§°ä¸­ä½¿ç”¨ï¼Œä¹Ÿä¼šè¿«ä½¿ä¸€äº›æµè§ˆå™¨è¿›å…¥å®Œå…¨ä¸åŒçš„è¡Œä¸ºï¼›
>
>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç”¨è½¬ä¹‰çš„å†…å®¹ï¼ŒåµŒå…¥åˆ°font-familyçš„å±æ€§åä¸­ï¼Œçªå˜åï¼Œ\22è¢«è§£ç å›åŒå¼•å·ï¼Œå¹¶ä¸”é—­åˆæ‰äº†styleå±æ€§ï¼Œä»è€Œæˆ‘ä»¬å¯ä»¥é€šè¿‡onloadäº‹ä»¶æ‰§è¡Œjavascriptä»£ç ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ=å·ï¼Œæ‹¬å·ç­‰ä¹Ÿéœ€è¦è¢«å†™ä¸ºè½¬ä¹‰å½¢å¼ã€‚æˆ‘ä»¬äº¦å¯åœ¨\22ååŠ ä¸Š\3eæ¥é—­åˆæ‰imgæ ‡ç­¾ï¼Œå¹¶åœ¨æ­¤ä¹‹åæ’å…¥è‡ªå·±çš„HTMLæ ‡ç­¾ã€‚



> Mutation-based XSSæ”»å‡»ç¤ºä¾‹èŠ‚é€‰è¯‘è‡ªä»¥ä¸‹æ–‡æ¡£ï¼ˆè‹±æ–‡å¥½çš„å»ºè®®è‡ªè¡Œé˜…è¯»åŸæ–‡ï¼Œå¦‚æœ‰é”™è¯¯è¯·åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼‰
>
> ğŸ‘‰ [fp170.pdf]( https://cure53.de/fp170.pdf)  
>
> ğŸ‘‰[mXSS Attacks: Attacking well-secured Web-Applications by using innerHTML Mutations](https://cure53.de/fp170.pdf)





# Cross Site Request Forgery (CSRF)

è·¨ç«™è¯·æ±‚ä¼ªé€ 

CSRF æ˜¯ä¸€ç§è¯±éª—å—å®³è€…æäº¤æ¶æ„è¯·æ±‚çš„æ”»å‡»ã€‚å®ƒç»§æ‰¿äº†å—å®³è€…çš„èº«ä»½å’Œç‰¹æƒä»¥ä»£è¡¨ã€å—å®³è€…ã€‘æ‰§è¡Œä¸éœ€è¦çš„åŠŸèƒ½ã€‚



**CSRFç‰¹ç‚¹**

- åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„å‰æä¸‹
- åˆ©ç”¨ç”¨æˆ·æƒé™(cookie)
- æ„é€ æŒ‡å®šHTTP è¯·æ±‚ï¼Œçªƒå–æˆ–ä¿®æ”¹ç”¨æˆ·æ•æ„Ÿä¿¡æ¯



**CSRFçš„æ”»å‡»æµç¨‹**

![image-20210905010637766](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905010637766.png)



**ä¸¾ä¸ªä¾‹å­**

ç”¨æˆ·æ”¶åˆ°äº†ä¸€å°é‚®ä»¶ï¼Œé‚®ä»¶ä¸­æœ‰ä¸€ä¸ªé“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼Œè·³è½¬åˆ°äº†æ¶æ„çš„é¡µé¢Bï¼Œåœ¨æ¶æ„é¡µé¢Bä¸­å‘Aå‘äº†ä¸€ä¸ªè¯·æ±‚ï¼Œæ­¤æ—¶è¿™ä¸ªè¯·æ±‚ä¼šå¸¦æœ‰åŸŸåAç‰¹æœ‰çš„Cookieï¼ŒåŸŸåAæ‰€åœ¨çš„æœåŠ¡å™¨æ¥å—åˆ°è¿™ä¸ªè¯·æ±‚ä¹‹åï¼Œå»éªŒè¯è¿™ä¸ªCookieï¼Œå‘ç°æ˜¯åˆæ³•ç”¨æˆ·ï¼Œåˆ™è¿›è¡Œäº†ä¸‹ä¸€æ­¥è¯·æ±‚ï¼Œè¿”å›äº†æˆåŠŸçš„ç»“æœã€‚

åœ¨è¿™æ•´ä¸ªè¿‡ç¨‹ä¸­

- ç”¨æˆ·æ²¡æœ‰è®¿é—®é¡µé¢A
- é¡µé¢Aä¸­çš„ç‰¹å®šæ¥å£è¢«è¯·æ±‚
- è¯·æ±‚æ‰§è¡ŒæˆåŠŸ

è¿™å°±æ˜¯è·¨ç«™ä¼ªé€ è¯·æ±‚



![image-20210903205030750](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/03/image-20210903205030750.png)



## GETç±»å‹çš„CSRF

**ä¸¾ä¸ªä¾‹å­**

å‡å¦‚åº”ç”¨ç¨‹åºè®¾è®¡ä¸ºä¸»è¦ä½¿ç”¨ GET è¯·æ±‚æ¥ä¼ è¾“å‚æ•°å’Œæ‰§è¡Œæ“ä½œï¼Œåˆ™æ±‡æ¬¾æ“ä½œå¯èƒ½ä¼šç®€åŒ–ä¸ºå¦‚ä¸‹è¯·æ±‚

![image-20210905232220622](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232220622.png)

ã€hackerğŸ˜ˆã€‘ç°åœ¨å†³å®šä½¿ç”¨ã€å¼ ä¸‰ğŸ˜‡ã€‘ä½œä¸ºå—å®³è€…æ¥åˆ©ç”¨æ­¤ Web åº”ç”¨ç¨‹åºæ¼æ´ã€‚ã€hackerã€‘ é¦–å…ˆåˆ©ç”¨æ¼æ´æ¥æ„å»ºä»¥ä¸‹ URLï¼Œè¯¥ URL å°†ä»ã€å¼ ä¸‰ã€‘çš„è´¦æˆ·è½¬ç§» 100,000 å…ƒåˆ° ã€hackerã€‘ çš„è´¦æˆ·ã€‚ã€hackerã€‘ä½¿ç”¨åŸå§‹å‘½ä»¤ URL å¹¶å°†æ”¶æ¬¾äººåç§°æ›¿æ¢ä¸ºè‡ªå·±ï¼ŒåŒæ—¶æ˜¾ç€æé«˜äº†è½¬è´¦é‡‘é¢ï¼š

![image-20210905232233680](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232233680.png)

å½“ã€å¼ ä¸‰ã€‘ç™»å½•åˆ°é“¶è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œè¯±å¯¼ä»–æ¥ç‚¹å‡»æ¶æ„çš„URLï¼Œé€šå¸¸ä¼šè¿™æ ·åš

- å‘é€å¸¦æœ‰ HTML å†…å®¹çš„æœªç»è¯·æ±‚çš„ç”µå­é‚®ä»¶
- åœ¨å—å®³è€…åœ¨è¿›è¡Œç½‘ä¸Šé“¶è¡Œä¸šåŠ¡æ—¶å¯èƒ½è®¿é—®çš„é¡µé¢ä¸Šæ¤å…¥æ¼æ´åˆ©ç”¨ URL æˆ–è„šæœ¬

æ¼æ´åˆ©ç”¨ URL å¯ä»¥ä¼ªè£…æˆä¸€ä¸ªæ™®é€šçš„é“¾æ¥ï¼Œé¼“åŠ±å—å®³è€…ç‚¹å‡»å®ƒï¼Œå¦‚ä¼ªè£…æˆä¸€ä¸ªæŠ½å¥–é“¾æ¥

![image-20210905232246808](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232246808.png)

æˆ–è€…ä½œä¸º 0x0 å‡å›¾åƒå‘é€ç»™ã€å¼ ä¸‰ã€‘

![image-20210905232304499](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232304499.png)

å¦‚æœæ­¤å›¾åƒæ ‡ç­¾åŒ…å«åœ¨ç”µå­é‚®ä»¶ä¸­ï¼Œã€å¼ ä¸‰ã€‘å°†çœ‹ä¸åˆ°ä»»ä½•å†…å®¹ã€‚ä½†æ˜¯ï¼Œæµè§ˆå™¨*ä»ä¼š*å‘ bank.com æäº¤æ±‡æ¬¾è¯·æ±‚ï¼Œåœ¨ã€å¼ ä¸‰ã€‘æ¯«ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œä»–çš„é’±å°±è¢«è½¬èµ°å•¦ï¼ğŸ¥¶



## POSTç±»å‹çš„CSRF

GET å’Œ POST æ”»å‡»ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«æ˜¯å—å®³è€…å¦‚ä½•æ‰§è¡Œæ”»å‡»ã€‚å‡è®¾é“¶è¡Œç°åœ¨ä½¿ç”¨ POST å¹¶ä¸”æ˜“å—æ”»å‡»çš„è¯·æ±‚å¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20210905232316001](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232316001.png)

æ­¤ç±»è¯·æ±‚æ— æ³•é€šè¿‡aæ ‡ç­¾é“¾æ¥ æˆ– IMG æ ‡ç­¾ä¼ é€’ï¼Œä½†å¯ä»¥ä½¿ç”¨ FORM æ ‡ç­¾ä¼ é€’ï¼š

![image-20210905232326918](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232326918.png)

è¿™ä¸ªè¡¨å•å°†è¦æ±‚ç”¨æˆ·å•å‡»æäº¤æŒ‰é’®ï¼Œä½†è¿™ä¹Ÿå¯ä»¥ä½¿ç”¨ JavaScript è‡ªåŠ¨æ‰§è¡Œï¼š

![image-20210905232341528](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232341528.png)

è¿™æ ·åœ¨å—å®³è€…ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œé’±åˆè¢«è½¬èµ°å•¦ï¼ğŸ¥¶ğŸ¥¶ğŸ¥¶



## ä¸ xss åŒºåˆ«

- é€šå¸¸æ¥è¯´ CSRF æ˜¯ç”± XSS å®ç°çš„ï¼ŒCSRF æ—¶å¸¸ä¹Ÿè¢«ç§°ä¸ºXSRFï¼ˆCSRF å®ç°çš„æ–¹å¼è¿˜å¯ä»¥æ˜¯ç›´æ¥é€šè¿‡å‘½ä»¤è¡Œå‘èµ·è¯·æ±‚ç­‰ï¼‰ã€‚
- æœ¬è´¨ä¸Šè®²ï¼ŒXSS æ˜¯ä»£ç æ³¨å…¥é—®é¢˜ï¼ŒCSRF æ˜¯ HTTP é—®é¢˜ã€‚XSS æ˜¯å†…å®¹æ²¡æœ‰è¿‡æ»¤å¯¼è‡´æµè§ˆå™¨å°†æ”»å‡»è€…çš„è¾“å…¥å½“ä»£ç æ‰§è¡Œã€‚CSRF åˆ™æ˜¯å› ä¸ºæµè§ˆå™¨åœ¨å‘é€ HTTP è¯·æ±‚æ—¶å€™è‡ªåŠ¨å¸¦ä¸Š cookieï¼Œè€Œä¸€èˆ¬ç½‘ç«™çš„ session éƒ½å­˜åœ¨ cookieé‡Œé¢ã€‚





# Injection

æ³¨å…¥

## SQL Injection

æ‰€è°“ SQL æ³¨å…¥ï¼Œå°±æ˜¯é€šè¿‡æŠŠ SQL å‘½ä»¤æ’å…¥åˆ° Web è¡¨å•æäº¤æˆ–é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆæ‰§è¡Œæ¶æ„çš„ SQL å‘½ä»¤ã€‚

![image-20210903211351360](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/03/image-20210903211351360.png)

ä»¥å¸¸ç”¨çš„ç™»å½•ä¸ºä¾‹ï¼Œè¡¨å•ä»£ç å¦‚ä¸‹

![image-20210905232355409](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232355409.png)

åç«¯çš„ SQL è¯­å¥å¯èƒ½æ˜¯è¿™æ ·çš„

![image-20210905232407080](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232407080.png)

ä½†å¦‚æœæœ‰ä¸€ä¸ªæ¶æ„æ”»å‡»è€…è¾“å…¥çš„ç”¨æˆ·åæ˜¯ `admin' --`ï¼Œå¯†ç éšæ„è¾“å…¥ï¼Œå°±å¯ä»¥ç›´æ¥ç™»å…¥ç³»ç»Ÿäº†ï¼Œä¸ºä»€ä¹ˆï¼Ÿ

å› ä¸ºæœ¬æ¥é¢„æƒ³çš„SQL è¯­å¥æ˜¯

![image-20210905232419995](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232419995.png)

ä½†æ˜¯æ¶æ„æ”»å‡»è€…ç”¨å¥‡æ€ªç”¨æˆ·åå°†ä½ çš„ SQL è¯­å¥å˜æˆäº†å¦‚ä¸‹å½¢å¼

![image-20210905232431571](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232431571.png)

åœ¨ SQL ä¸­,`' --`æ˜¯é—­åˆå’Œæ³¨é‡Šçš„æ„æ€ï¼Œ-- æ˜¯æ³¨é‡Šåé¢çš„å†…å®¹çš„æ„æ€ï¼Œæ‰€ä»¥æŸ¥è¯¢è¯­å¥å°±å˜æˆäº†

![image-20210905232446277](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232446277.png)





  ## Injectionä¸æ­¢äºSQL

é™¤äº†SQLçš„æ³¨å…¥ï¼Œè¿˜æœ‰å¯èƒ½æ˜¯é€šè¿‡ä¸€äº›å‘½ä»¤æ³¨å…¥æ”»å‡»ï¼Œå¦‚

- CLl
- OS command
- Server- Side Request Forgery(SSRF)ï¼ŒæœåŠ¡ç«¯ä¼ªé€ è¯·æ±‚
  - ä¸¥æ ¼è€Œè¨€ï¼ŒSSRFä¸æ˜¯injection,ä½†æ˜¯åŸç†ç±»ä¼¼

å‘½ä»¤æ³¨å…¥æ”»å‡»å¯ä»¥å‘Shellå‘é€å‘½ä»¤ï¼Œè®©Windowsæˆ–Linuxæ“ä½œç³»ç»Ÿçš„å‘½ä»¤è¡Œå¯åŠ¨ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡å‘½ä»¤æ³¨å…¥æ”»å‡»å¯æ‰§è¡Œæ“ä½œç³»ç»Ÿä¸Šå®‰è£…ç€çš„å„ç§ç¨‹åºã€‚

å‡å¦‚éœ€è¦å®ç°ä¸€ä¸ªéœ€æ±‚ï¼šç”¨æˆ·æäº¤ä¸€äº›å†…å®¹åˆ°æœåŠ¡å™¨ï¼Œç„¶ååœ¨æœåŠ¡å™¨æ‰§è¡Œä¸€äº›ç³»ç»Ÿå‘½ä»¤å»è¿”å›ä¸€ä¸ªç»“æœç»™ç”¨æˆ·

![image-20210905232506517](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905232506517.png)

å¦‚æœ `params.repo` ä¼ å…¥çš„æ˜¯ `https://github.com/admin/admin.github.io.git` ç¡®å®èƒ½ä»æŒ‡å®šçš„ git repo ä¸Šä¸‹è½½åˆ°æƒ³è¦çš„ä»£ç ã€‚ ä½†æ˜¯å¦‚æœ `params.repo` ä¼ å…¥çš„æ˜¯ `https://github.com/xx/xx.git && rm -rf /* &&`ï¼Œ æ°å¥½ä½ çš„æœåŠ¡æ˜¯ç”¨ root æƒé™èµ·çš„å°±ç³Ÿç³•äº†ã€‚





# Denial of Service(DoS)

DoS(Denial of Service)ï¼Œå³æ‹’ç»æœåŠ¡ï¼Œé€ æˆè¿œç¨‹æœåŠ¡å™¨æ‹’ç»æœåŠ¡çš„è¡Œä¸ºè¢«ç§°ä¸ºDoSæ”»å‡»ã€‚å…¶ç›®çš„æ˜¯ä½¿è®¡ç®—æœºæˆ–ç½‘ç»œæ— æ³•æä¾›æ­£å¸¸çš„æœåŠ¡



> é€šè¿‡æŸç§æ–¹å¼(æ„é€ ç‰¹å®šè¯·æ±‚)ï¼Œå¯¼è‡´æœåŠ¡å™¨èµ„æºè¢«æ˜¾è‘—æ¶ˆè€—ï¼Œæ¥ä¸åŠå“åº”æ›´å¤šè¯·æ±‚ï¼Œå¯¼è‡´è¯·æ±‚æŒ¤å‹ï¼Œè¿›è€Œé›ªå´©æ•ˆåº”ã€‚



## ReDoS:åŸºäºæ­£åˆ™è¡¨è¾¾å¼çš„DoS

æ ¹æ®æ­£åˆ™çš„è´ªå©ªæ¨¡å¼ç‰¹æ€§æ„é€ æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½¿å…¶å› ä¸ºä¸€ç›´åŒ¹é…ä¸ä¸Šï¼Œå¯¼è‡´æ¥å£çš„å“åº”æ—¶é—´å˜é•¿

![image-20210903212045717](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/03/image-20210903212045717.png)





# Distributed DoS(DDoS)

DDOS(Distributed Denial of Service)æ”»å‡»å…¨ç§°åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡ã€‚æ˜¯DoSæ”»å‡»çš„ä¸€ç§æ–¹æ³•ã€‚



æŒ‡å€ŸåŠ©äºå®¢æˆ·/æœåŠ¡å™¨æŠ€æœ¯ï¼Œå°†å¤šä¸ªè®¡ç®—æœºè”åˆèµ·æ¥ä½œä¸ºæ”»å‡»å¹³å°ï¼Œå¯¹ä¸€ä¸ªæˆ–å¤šä¸ªç›®æ ‡å‘åŠ¨DDoSæ”»å‡»ï¼Œä»è€Œæˆå€åœ°æé«˜æ‹’ç»æœåŠ¡æ”»å‡»çš„å¨åŠ›ã€‚é˜»æ­¢åˆæ³•ç”¨æˆ·å¯¹æ­£å¸¸ç½‘ç»œèµ„æºçš„è®¿é—®ï¼Œä»è€Œè¾¾æˆæ”»å‡»è€…ä¸å¯å‘Šäººçš„ç›®çš„ã€‚DDoSçš„æ”»å‡»ç­–ç•¥ä¾§é‡äºé€šè¿‡å¾ˆå¤šâ€œåƒµå°¸ä¸»æœºâ€ï¼Œå‘å—å®³ä¸»æœºå‘é€å¤§é‡çœ‹ä¼¼åˆæ³•çš„ç½‘ç»œåŒ…ï¼Œä»è€Œé€ æˆç½‘ç»œé˜»å¡æˆ–æœåŠ¡å™¨èµ„æºè€—å°½è€Œå¯¼è‡´æ‹’ç»æœåŠ¡ã€‚



> å³çŸ­æ—¶é—´å†…ï¼Œæ¥è‡ªå¤§é‡åƒµå°¸è®¾å¤‡çš„è¯·æ±‚æµé‡ï¼ŒæœåŠ¡å™¨ä¸èƒ½åŠæ—¶å®Œæˆå…¨éƒ¨è¯·æ±‚ï¼Œå¯¼è‡´è¯·æ±‚å †ç§¯ï¼Œè¿›è€Œé›ªå´©æ•ˆåº”ï¼Œæ— æ³•å“åº”æ–°è¯·æ±‚ã€‚

æ”»å‡»ç‰¹ç‚¹

- ç›´æ¥è®¿é—®IP
- ä»»æ„API
- æ¶ˆè€—å¤§é‡å¸¦å®½(è€—å°½)

## SYN æ”»å‡»

å±äº DDOS æ”»å‡»ä¸­çš„ä¸€ç§å…·ä½“è¡¨ç°å½¢å¼ã€‚

åœ¨ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨å‘é€ SYN-ACK ä¹‹åï¼Œæ”¶åˆ°å®¢æˆ·ç«¯çš„ ACK ä¹‹å‰çš„ TCP è¿æ¥ç§°ä¸ºåŠè¿æ¥(half-open connect)ã€‚æ­¤æ—¶æœåŠ¡å™¨å¤„äº SYN_RCVD çŠ¶æ€ã€‚å½“æ”¶åˆ° ACK åï¼ŒæœåŠ¡å™¨æ‰èƒ½è½¬å…¥ ESTABLISHED çŠ¶æ€.

SYN æ”»å‡»æŒ‡çš„æ˜¯ï¼Œæ”»å‡»å®¢æˆ·ç«¯åœ¨çŸ­æ—¶é—´å†…ä¼ªé€ å¤§é‡ä¸å­˜åœ¨çš„ IP åœ°å€ï¼Œå‘æœåŠ¡å™¨ä¸æ–­åœ°å‘é€ SYN åŒ…ï¼ŒæœåŠ¡å™¨å›å¤ç¡®è®¤åŒ…ï¼Œå¹¶ç­‰å¾…å®¢æˆ·çš„ç¡®è®¤ã€‚

ç”±äºæºåœ°å€æ˜¯ä¸å­˜åœ¨çš„ï¼ŒæœåŠ¡å™¨éœ€è¦ä¸æ–­çš„é‡å‘ç›´è‡³è¶…æ—¶ï¼Œè¿™äº›ä¼ªé€ çš„ SYN åŒ…å°†é•¿æ—¶é—´å ç”¨æœªè¿æ¥é˜Ÿåˆ—ï¼Œæ­£å¸¸çš„ SYN è¯·æ±‚è¢«ä¸¢å¼ƒï¼Œå¯¼è‡´ç›®æ ‡ç³»ç»Ÿè¿è¡Œç¼“æ…¢ï¼Œä¸¥é‡è€…ä¼šå¼•èµ·ç½‘ç»œå µå¡ç”šè‡³ç³»ç»Ÿç˜«ç—ªã€‚

![image-20210903212508238](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/03/image-20210903212508238.png)

**æ‰“ä¸ªæ¯”æ–¹**

ä¸€ç¾¤æ¶éœ¸è¯•å›¾è®©å¯¹é¢é‚£å®¶æœ‰ç€ç«äº‰å…³ç³»çš„å•†é“ºæ— æ³•æ­£å¸¸è¥ä¸šï¼Œä»–ä»¬ä¼šé‡‡å–ä»€ä¹ˆæ‰‹æ®µå‘¢ï¼Ÿï¼ˆåªä¸ºä¸¾ä¾‹ï¼Œåˆ‡å‹¿æ¨¡ä»¿ï¼‰

![image-20210905021614078](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905021614078.png)

æ¶éœ¸ä»¬æ‰®ä½œæ™®é€šå®¢æˆ·ä¸€ç›´æ‹¥æŒ¤åœ¨å¯¹æ‰‹çš„å•†é“ºï¼Œèµ–ç€ä¸èµ°ï¼ŒçœŸæ­£çš„è´­ç‰©è€…å´æ— æ³•è¿›å…¥ï¼›æˆ–è€…æ€»æ˜¯å’Œè¥ä¸šå‘˜æœ‰ä¸€æ­æ²¡ä¸€æ­çš„ä¸œæ‰¯è¥¿æ‰¯ï¼Œè®©å·¥ä½œäººå‘˜ä¸èƒ½æ­£å¸¸æœåŠ¡å®¢æˆ·ï¼›ä¹Ÿå¯ä»¥ä¸ºå•†é“ºçš„ç»è¥è€…æä¾›è™šå‡ä¿¡æ¯ï¼Œå•†é“ºçš„ä¸Šä¸Šä¸‹ä¸‹å¿™æˆä¸€å›¢ä¹‹åå´å‘ç°éƒ½æ˜¯ä¸€åœºç©ºï¼Œæœ€ç»ˆè·‘äº†çœŸæ­£çš„å¤§å®¢æˆ·ï¼ŒæŸå¤±æƒ¨é‡ã€‚

![image-20210905021944509](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905021944509.png)

æ­¤å¤–æ¶éœ¸ä»¬å®Œæˆè¿™äº›åäº‹æœ‰æ—¶å‡­å•å¹²éš¾ä»¥å®Œæˆï¼Œéœ€è¦å«ä¸Šå¾ˆå¤šäººä¸€èµ·ã€‚ç½‘ç»œå®‰å…¨é¢†åŸŸä¸­ DoS å’Œ DDoS æ”»å‡»å°±éµå¾ªç€è¿™äº›æ€è·¯ã€‚



# ä¼ è¾“å±‚(MITM*æ”»å‡»*)

ä¸­é—´äººæ”»å‡»(Man-in-the-MiddleAttackï¼Œç®€ç§°â€œMITM*æ”»å‡»*â€)ã€‚

æ˜¯æŒ‡æ”»å‡»è€…ä¸é€šè®¯çš„ä¸¤ç«¯åˆ†åˆ«åˆ›å»ºç‹¬ç«‹çš„è”ç³»ï¼Œå¹¶äº¤æ¢å…¶æ‰€æ”¶åˆ°çš„æ•°æ®ï¼Œä½¿é€šè®¯çš„ä¸¤ç«¯è®¤ä¸ºä»–ä»¬æ­£åœ¨é€šè¿‡ä¸€ä¸ªç§å¯†çš„è¿æ¥ä¸å¯¹æ–¹ ç›´æ¥å¯¹è¯ï¼Œä½†äº‹å®ä¸Šæ•´ä¸ªä¼šè¯éƒ½è¢«æ”»å‡»è€…å®Œå…¨æ§åˆ¶ã€‚åœ¨ä¸­é—´äººæ”» å‡»ä¸­ï¼Œæ”»å‡»è€…å¯ä»¥æ‹¦æˆªé€šè®¯åŒæ–¹çš„é€šè¯å¹¶æ’å…¥æ–°çš„å†…å®¹ã€‚

> ç›´ç™½çš„è¯´å°±æ˜¯ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨å½¼æ­¤ä»¥ä¸ºåœ¨äº’ç›¸æ²Ÿé€šï¼Œä½†å®é™…ä¸Šæœ‰ä¸€ä¸ªä¸­é—´äººåœ¨é‡Œé¢æ’äº†æ’äº†ä¸€è„šï¼Œçªƒå–äº†ä¿¡æ¯æˆ–è€…ä¿®æ”¹äº†è¯·æ±‚ç­‰ã€‚

![image-20210905145019218](https://gitee.com/Olivivian/PicGoImages/raw/master/img//Typora/typora-user-images/2021/09/05/image-20210905145019218.png)



**ç”¨æ—¥å¸¸ç”Ÿæ´»çš„å†™ä¿¡æ¥ç±»æ¯”çš„è¯**ï¼š

ä½ ç»™æœ‹å‹å†™äº†ä¸€å°ä¿¡ï¼Œé‚®é€’å‘˜å¯ä»¥æŠŠæ¯ä¸€ä»½ä½ å¯„å‡ºå»çš„ä¿¡éƒ½æ‹†å¼€çœ‹ï¼Œç”šè‡³æŠŠä¿¡çš„å†…å®¹æ”¹æ‰ï¼Œç„¶åé‡æ–°å°èµ·æ¥ï¼Œå†å¯„å‡ºå»ç»™ä½ çš„æœ‹å‹ã€‚

æœ‹å‹æ”¶åˆ°ä¿¡ä¹‹åç»™ä½ å›ä¿¡ï¼Œé‚®é€’å‘˜åˆå¯ä»¥æ‹†å¼€çœ‹ï¼Œçœ‹å®Œéšä¾¿æ”¹ï¼Œæ”¹å®Œå°å¥½å†é€åˆ°ä½ æ‰‹ä¸Šã€‚

ä½ å…¨ç¨‹éƒ½ä¸çŸ¥é“è‡ªå·±å¯„å‡ºå»çš„ä¿¡å’Œæ”¶åˆ°çš„ä¿¡éƒ½ç»è¿‡é‚®é€’å‘˜è¿™ä¸ªâ€œä¸­é—´äººâ€è½¬æ‰‹å’Œå¤„ç†

â€”â€”æ¢å¥è¯è¯´ï¼Œå¯¹äºä½ å’Œä½ æœ‹å‹æ¥è®²ï¼Œé‚®é€’å‘˜è¿™ä¸ªâ€œä¸­é—´äººâ€è§’è‰²æ˜¯ä¸å¯è§çš„ã€‚



**ä¸­é—´äººæ”»å‡»ç±»å‹å¤§è‡´æœ‰**

- Wi-Fiæ¬ºéª—ï¼Œ*æ”»å‡»è€…åˆ›å»ºä¸æœ¬åœ°å…è´¹Wi-FiåŒåçš„è™šå‡Wi-Fiæ¥å…¥ç‚¹*
- HTTPSæ¬ºéª—ï¼Œ*æ”»å‡»è€…é€šè¿‡æ¬ºéª—æˆ‘ä»¬çš„æµè§ˆå™¨ï¼Œè®©æˆ‘ä»¬è®¤ä¸ºè‡ªå·±è®¿é—®çš„æ˜¯å¯ä¿¡ä»»ç«™ç‚¹*
- SSLåŠ«æŒï¼Œ*å½“æˆ‘ä»¬å°è¯•è¿æ¥æˆ–è®¿é—®ä¸å®‰å…¨çš„HTTP://ç«™ç‚¹æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªå·±é‡å®šå‘åˆ°å®‰å…¨çš„HTTPS://å¤„ã€‚è¿™ä¸ªæ—¶å€™æ”»å‡»è€…å°±å¯ä»¥åŠ«æŒè¿™ä¸ªé‡å®šå‘çš„è¿‡ç¨‹ï¼Œå°†å…¶æŒ‡å‘è‡ªå»ºæœåŠ¡å™¨çš„é“¾æ¥æ¤å…¥å…¶ä¸­*
- DNSæ¬ºéª—ï¼Œ*ä½¿æµè§ˆå™¨URLè½¬åŒ–å¼‚å¸¸ï¼Œä»è€Œè®¿é—®ä¸€äº›æ¶æ„çš„åœ°å€*
- ç”µå­é‚®ä»¶åŠ«æŒ



**ä¸ºä»€ä¹ˆä¸­é—´äººå¯ä»¥è¿›è¡Œè¿™ç§æ”»å‡»ï¼Ÿ**

1ã€è¯·æ±‚çš„æ‰€æœ‰çš„ä¿¡æ¯éƒ½æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œè°éƒ½å¯è§

2ã€è¯·æ±‚ä¿¡æ¯è¢«ç¯¡æ”¹æ—¶ï¼Œæ¥æ”¶æ–¹å¹¶ä¸çŸ¥é“

3ã€åŒæ–¹å¹¶æ²¡æœ‰å¯¹å½¼æ­¤çš„èº«ä»½è¿›è¡ŒæœªéªŒè¯



# æ€»ç»“

**è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰**ï¼Œå³æ”»å‡»è€…æŠŠä»–ä»¬çš„è„šæœ¬æ¶æ„çš„æ’åˆ°æˆ‘ä»¬çš„é¡µé¢æ‰§è¡Œï¼›

- 1ï¼‰å­˜å‚¨å‹æ”»å‡»ï¼ˆStored XSSï¼‰ï¼Œå³æ¶æ„è„šæœ¬ä¼šè¢«å­˜åœ¨æ•°æ®åº“ä¸­
- 2ï¼‰åå°„å‹æ”»å‡»ï¼ˆReflected XSSï¼‰ï¼ŒåˆåéæŒä¹…ï¼Œå› ä¸ºä¸ä¼šè¢«å‚¨å­˜åˆ°æ•°æ®åº“ï¼Œåªæ˜¯ä»URLä¸Šè¿›è¡Œæ”»å‡»
- 3ï¼‰åŸºäºDOMçš„æ”»å‡»ï¼ˆDOM-based XSSï¼‰ï¼Œä¸éœ€è¦æœåŠ¡å™¨çš„å‚ä¸ï¼Œæ¶æ„æ”»å‡»çš„å‘èµ·+æ‰§è¡Œï¼Œå…¨åœ¨æµè§ˆå™¨å®Œæˆï¼›
  æ¶æ„æ”»å‡»çš„å‘èµ·+æ‰§è¡Œï¼Œå…¨åœ¨æµè§ˆå™¨å®Œæˆ
- 4ï¼‰çªå˜å‹æ”»å‡»ï¼ˆMutation-based XSSï¼‰ï¼Œåˆ©ç”¨æµè§ˆå™¨æ¸²æŸ“DOMçš„ç‰¹æ€§ï¼Œå¯¹æµè§ˆå™¨é’ˆå¯¹æ€§çš„æ”»å‡»ï¼Œæ¯”å¦‚ï¼šåå¼•å·æ‰“ç ´å±æ€§è¾¹ç•Œã€CSSä¸­å±æ€§å€¼/å±æ€§åçš„è½¬ä¹‰ç­‰

> åå°„å‹å’ŒåŸºäºDOMçš„ä¸»è¦åŒºåˆ«å°±æ˜¯å®Œæˆæ³¨å…¥è„šæœ¬çš„åœ°æ–¹ä¸åŒ

**è·¨ç«™è¯·æ±‚ä¼ªé€ (CSRF)**ï¼Œè¯±å¯¼ç”¨æˆ·æ‰“å¼€é»‘å®¢çš„ç½‘ç«™ï¼Œçªƒå–ç”¨æˆ·ç™»å½•ä¿¡æ¯ï¼Œå†’å……ç”¨æˆ·èº«ä»½è¿›è¡Œæ¶æ„çš„æ“ä½œã€‚

- 1ï¼‰GETç±»å‹çš„CSRF
- 2ï¼‰POSTç±»å‹çš„CSRF

> GETå’ŒPOSTæ”»å‡»çš„åŒºåˆ«æ˜¯å—å®³è€…å¦‚ä½•æ‰§è¡Œæ”»å‡»

> è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰å’Œè·¨ç«™è¯·æ±‚ä¼ªé€ (CSRF)çš„åŒºåˆ«ï¼Œæœ¬è´¨ä¸Šè®²ï¼ŒXSS æ˜¯ä»£ç æ³¨å…¥é—®é¢˜ï¼ŒCSRF æ˜¯ HTTP é—®é¢˜ã€‚

**æ³¨å…¥æ”»å‡»Injection**

- 1ï¼‰SQL æ³¨å…¥æ”»å‡»ï¼Œé€šè¿‡æŠŠ SQL å‘½ä»¤æ’å…¥åˆ° Web è¡¨å•æäº¤æˆ–é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆæ‰§è¡Œæ¶æ„çš„ SQL å‘½ä»¤
- 2ï¼‰å‘½ä»¤æ³¨å…¥æ”»å‡»

**DoSæ”»å‡»(Denial of Service)**ï¼Œé€ æˆè¿œç¨‹æœåŠ¡å™¨æ‹’ç»æœåŠ¡çš„æ”»å‡»ï¼Œç›®çš„æ˜¯ä½¿è®¡ç®—æœºæˆ–ç½‘ç»œæ— æ³•æä¾›æ­£å¸¸çš„æœåŠ¡

**DDOSæ”»å‡»(Distributed Denial of Service)**ï¼Œåˆ†å¸ƒå¼æ‹’ç»æœåŠ¡

**MITMæ”»å‡»ï¼ˆMan-in-the-MiddleAttackï¼‰**ï¼Œä¸­é—´äººæ”»å‡»ï¼Œé’ˆå¯¹ä¼ è¾“å±‚çš„æ”»å‡»



# ç¢ç¢å¿µ

åˆ†æå„ç§webæ”»å‡»æ‰‹æ®µæ˜¯ä¸ºäº†èƒ½å¤Ÿè®©æˆ‘ä»¬æ›´å¥½çš„è¿›è¡Œé˜²å¾¡ï¼Œæ²¡æœ‰è®©å¤§å®¶å»æ”»å‡»åˆ«äººçš„æ„æ€å•Šw(ï¾ŸĞ”ï¾Ÿ)wï¼ï¼ˆä»¥ä¸Šå…¨éƒ¨ç¤ºä¾‹ä»…ç”¨äºä¸¾ä¾‹ï¼Œåˆ‡å‹¿æ¨¡ä»¿ğŸ‘»ï¼‰





å‚è€ƒèµ„æ–™ï¼š

[Cross Site Scripting (XSS)](https://owasp.org/www-community/attacks/xss/)

[DOM Based XSS](https://owasp.org/www-community/attacks/DOM_Based_XSS)

[XSS Filter Evasion Cheat Sheet](https://owasp.org/www-community/xss-filter-evasion-cheatsheet)

[Cross-site scripting](https://en.wikipedia.org/wiki/Cross-site_scripting#cite_note-11)

[The Cross-Site Scripting (XSS)](https://www.cgisecurity.com/xss-faq.html) 

[Cross-site request forgery](https://en.wikipedia.org/wiki/Cross-site_request_forgery)

[Cross Site Request Forgery (CSRF)](https://owasp.org/www-community/attacks/csrf)

[è°ˆè°ˆå¯¹ Web å®‰å…¨çš„ç†è§£](https://zhuanlan.zhihu.com/p/25486768?group_id=820705780520079360)

[å¸¸è§å…­å¤§Webå®‰å…¨æ”»é˜²è§£æ](https://juejin.cn/post/6844903772930441230#heading-31)

[MDNâ€”ä¸­é—´äººæ”»å‡»ï¼ˆMitMï¼‰](https://developer.mozilla.org/zh-CN/docs/Glossary/MitM)

[ç™¾åº¦ç™¾ç§‘â€”ä¸­é—´äººæ”»å‡»](https://baike.baidu.com/item/%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB/1739730?fr=aladdin)

